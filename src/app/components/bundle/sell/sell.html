<div class="flex flex-col-reverse md:flex-row items-start">
  <!-- Left Column -->
  <div class="w-full md:w-1/2 flex flex-col gap-4 p-6">
    <div class="flex gap-4 flex-wrap">
      @for (tag of bundle.tags; track $index) {
      <div class="badge badge-info">{{tag}}</div>
      } @for (category of bundle.categories; track $index) {
      <div class="badge badge-outline badge-primary">{{category}}</div>
      }
      <span>|</span>
      <span>SKU: 1234567890</span>
    </div>

    <h1 class="text-3xl">
      <strong>{{bundle.name}}</strong>
    </h1>

    <p>{{bundle.description}}</p>

    <div class="divider"></div>

    @if (bundle.discount) {
    <div class="flex items-baseline gap-2">
      <h3 class="text-sm primary text-error line-through">
        {{ bundle.price | currency:'USD':'symbol':'1.2-2':'en-US' }}
      </h3>
      <h3 class="text-xl font-semibold text-primary">
        {{ discountedPrice | currency:'USD':'symbol':'1.2-2':'en-US' }}
      </h3>
    </div>
    } @else {
    <h3 class="text-xl font-semibold text-primary">
      {{ bundle.price | currency:'USD':'symbol':'1.2-2':'en-US' }}
    </h3>
    }

    <div class="flex gap-4">
      <div class="join">
        <button class="btn join-item" (click)="decreaseQuantity()">
          <i-lucide [img]="minusIcon" />
        </button>
        <input
          type="number"
          class="input join-item appearance-none"
          min="1"
          [value]="quantity"
          (input)="quantity = $any($event.target).valueAsNumber"
        />
        <button class="btn join-item" (click)="increaseQuantity()">
          <i-lucide [img]="plusIcon" />
        </button>
      </div>
      <button class="btn btn-secondary">Add to cart</button>
    </div>

    <div class="flex gap-4">
      <button class="btn btn-ghost btn-accent">
        Add to favorites
        <i-lucide [img]="heartIcon" />
      </button>
      <button class="btn btn-ghost btn-accent">
        Share
        <i-lucide [img]="shareIcon" />
      </button>
    </div>

    <app-rating [rate]="bundle.averageRate" />

    <ul class="list bg-base-100 rounded-box shadow-md hidden lg:block">
      <li class="p-4 pb-2 text-xs opacity-60 tracking-wide">
        Products in this bundle
      </li>

      @for (productQuantity of bundle.products; track $index) {
      <li class="list-row">
        <div>
          <div>{{productQuantity.product.name}}</div>
          <div class="text-xs uppercase font-semibold opacity-60">
            x {{productQuantity.quantity}}
          </div>
        </div>
        <button
          class="btn btn-ghost btn-circle"
          (click)="goToProduct(productQuantity.product.id)"
        >
          <i-lucide [img]="linkIcon" />
        </button>
        <app-rating [rate]="productQuantity.product.averageRate" />
      </li>
      }
    </ul>

    <div class="hidden lg:block">
      <app-comments />
    </div>
  </div>

  <!-- Left Column -->
  <div class="w-full md:w-1/2 p-6">
    <img
      [src]="bundle.image"
      class="w-full object-cover rounded-xl"
      [alt]="bundle.name"
      #productImage
    />
  </div>
</div>

<ul class="list bg-base-100 rounded-box shadow-md lg:hidden">
  <li class="p-4 pb-2 text-xs opacity-60 tracking-wide">
    Products in this bundle
  </li>

  @for (productQuantity of bundle.products; track $index) {
  <li class="list-row">
    <div>
      <div>{{productQuantity.product.name}}</div>
      <div class="text-xs uppercase font-semibold opacity-60">
        x {{productQuantity.quantity}}
      </div>
    </div>
    <button class="btn btn-ghost btn-circle gap-2">
      <i-lucide [img]="linkIcon" />
    </button>
    <app-rating [rate]="productQuantity.product.averageRate" />
  </li>
  }
</ul>

<div class="block lg:hidden p-6">
  <app-comments />
</div>
